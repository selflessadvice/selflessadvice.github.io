(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},5129:(e,t,a)=>{Promise.resolve().then(a.bind(a,5975))},5229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5975:(e,t,a)=>{"use strict";a.d(t,{ArticleEditor:()=>u});var s=a(5155),l=a(2115),r=a(63),n=a(7828);let i=(0,a(1847).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var c=a(6191),o=a(5229),d=a(1733);function u(e){let{article:t}=e,a=(0,r.useRouter)(),[u,m]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!1),[g,p]=(0,l.useState)({title:(null==t?void 0:t.title)||"",excerpt:(null==t?void 0:t.excerpt)||"",content:(null==t?void 0:t.content)||"",featuredImage:(null==t?void 0:t.featuredImage)||"",metaTitle:(null==t?void 0:t.metaTitle)||"",metaDescription:(null==t?void 0:t.metaDescription)||"",status:(null==t?void 0:t.status)||"DRAFT",featured:(null==t?void 0:t.featured)||!1,tags:(null==t?void 0:t.tags.map(e=>e.tag.name))||[]}),[b,f]=(0,l.useState)(""),y=async e=>{e.preventDefault(),m(!0);try{let e=await fetch(t?"/api/articles/".concat(t.id):"/api/articles",{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!e.ok)throw Error("Failed to save article");await e.json(),a.push("/admin/articles")}catch(e){console.error("Error saving article:",e)}finally{m(!1)}},v=()=>{b.trim()&&!g.tags.includes(b.trim())&&(p(e=>({...e,tags:[...e.tags,b.trim()]})),f(""))};return x?(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Preview"}),(0,s.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Back to Editor"})]}),(0,s.jsxs)("article",{className:"bg-white rounded-xl p-8 shadow-sm border",children:[g.featuredImage&&(0,s.jsx)("img",{src:g.featuredImage,alt:g.title,className:"w-full h-64 object-cover rounded-lg mb-6"}),(0,s.jsx)("h1",{className:"font-playfair text-4xl font-bold text-gray-900 mb-4",children:g.title}),g.excerpt&&(0,s.jsx)("p",{className:"text-xl text-gray-600 mb-6",children:g.excerpt}),(0,s.jsx)("div",{className:"prose prose-lg max-w-none",children:g.content.split("\n").map((e,t)=>(0,s.jsx)("p",{className:"mb-4",children:e},t))})]})]}):(0,s.jsxs)(d.P.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:y,className:"max-w-4xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 shadow-sm border",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("select",{value:g.status,onChange:e=>p(t=>({...t,status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,s.jsx)("option",{value:"PUBLISHED",children:"Published"}),(0,s.jsx)("option",{value:"SCHEDULED",children:"Scheduled"}),(0,s.jsx)("option",{value:"ARCHIVED",children:"Archived"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:g.featured,onChange:e=>p(t=>({...t,featured:e.target.checked})),className:"mr-2"}),"Featured Article"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>h(!0),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 flex items-center",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,s.jsxs)("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[(0,s.jsx)(i,{className:"w-4 h-4 mr-2"}),u?"Saving...":"Save Article"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,s.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Article Title *"}),(0,s.jsx)("input",{type:"text",value:g.title,onChange:e=>p(t=>({...t,title:e.target.value})),placeholder:"Enter a compelling title...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg font-medium",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt"}),(0,s.jsx)("textarea",{value:g.excerpt,onChange:e=>p(t=>({...t,excerpt:e.target.value})),placeholder:"Brief description of your article...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),(0,s.jsx)("textarea",{value:g.content,onChange:e=>p(t=>({...t,content:e.target.value})),placeholder:"Share your wisdom and insights...",rows:20,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",required:!0}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Write your content in plain text. Basic formatting will be applied automatically."})]})]})})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Featured Image"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"url",value:g.featuredImage,onChange:e=>p(t=>({...t,featuredImage:e.target.value})),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),g.featuredImage&&(0,s.jsx)("img",{src:g.featuredImage,alt:"Featured",className:"w-full h-32 object-cover rounded-lg"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Tags"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:b,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),v()),placeholder:"Add a tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),(0,s.jsx)("button",{type:"button",onClick:v,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:(0,s.jsx)(c.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:g.tags.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>{p(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},className:"ml-2 text-blue-600 hover:text-blue-800",children:(0,s.jsx)(o.A,{className:"w-3 h-3"})})]},e))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"SEO Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),(0,s.jsx)("input",{type:"text",value:g.metaTitle,onChange:e=>p(t=>({...t,metaTitle:e.target.value})),placeholder:"SEO title (60 chars max)",maxLength:60,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,s.jsx)("textarea",{value:g.metaDescription,onChange:e=>p(t=>({...t,metaDescription:e.target.value})),placeholder:"SEO description (160 chars max)",maxLength:160,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})]})]})]})]})]})}},6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7828:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{e.O(0,[559,441,255,358],()=>e(e.s=5129)),_N_E=e.O()}]);